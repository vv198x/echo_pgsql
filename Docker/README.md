**Dockerfile** используется для создания образа для приложения go, userSL. Он начинается с базового образа golang, добавляет исходный код из архива tar.gz в GOPATH(так не нужно вызывать go mod install) и создает бинарный файл. Параметр CGO_ENABLED=0 нужен для совместимости с CentOS 7 и проекте не используется CGO.  Вместо скачивания архива, можно просто запускать COPY . . Затем он создает новый пустой образ и копирует в него бинарный файл и сертификаты SSL, которые уже есть в Golang - Alpine.
#
Файл **docker-compose.yml** описывает много контейнерное приложение, которое запускает как базу данных postgres (userpg), так и приложение userSL (user). Служба базы данных использует образ postgres 11-alpine3.16. Минимальная версия в докер. Более новые версии избыточны, обновления в них затрагивают в основном подсистемы GIN, WAL и JSONB. Для этого проекта не критично. И устанавливает переменные среды для базы данных, имени пользователя, пароля и каталога данных. Также для примера изменяется конфигурация postgres - "log_line_prefix=%m [%p] %q%u@%d %h - ", ещё например можно настраивать WAL и автоматическое перестроение индексов. Docker compose создает образ с помощью Dockerfile и устанавливает переменные среды для миграции(init, up, down, reset), ключ JWT, адрес, учетные данные базы данных и порты. Контейнер приложения прослушивает порт 8000. Команда expose реализует FORWARD в файрволле. База данных и приложение связаны через сеть. Сеть frontend используется для подключения к контейнеру пользователя, а сеть backend используется для подключения к контейнеру PostgreSQL.
### Запуск
```
docker-compose build
docker-compose up
```
### Остановка
```
docker-compose down
```
### Отчистка
Удалит **ВСЕ** не запущенные контейнеры.
```
docker system prune -a
```
